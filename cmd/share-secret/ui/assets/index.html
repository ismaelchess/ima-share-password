<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Share-Secret</title>
  </head>
  <body>
        <h1>Share-Secret</h1>

        <form id="secret-form">
          <label for="secret">Valor:</label>
          <br>
          <input type="text" id="secret" name="secret" required  minlength="1" maxlength="200" size="50" />
          <button id="btn-get">Obtener Liga a Compartir</button>
        </form>
        <script>
            function handlePostSecret(secret){
                var url = "http://localhost:8080/secret";
                var data = {secret};
                var config = {
                    method: "POST",
                    body: JSON.stringify(data),
                    mode: 'cors',
                }

                fetch(url, config).then(response => {
                        return response.json()
                })
                    .then(data => console.log(data))
            }

           const load = () => {
                var btn = document.getElementById("btn-get")
                btn.addEventListener("click",function(e){
                    e.preventDefault()
                    var input = document.getElementById('secret')
                    handlePostSecret(input.value)
                })
            }
            window.onload = load;
        </script>

  </body>
</html>